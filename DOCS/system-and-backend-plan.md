# תיאור המערכת ותובנות לבניית בקאנד

## תמצית
המערכת מיועדת לבנקי דם ומטרתה המרכזית לחסוך זמן ניהול מלאי ריאגנטים, לשלב מידע רלוונטי ולהניע תהליכים חכמים בממשק אחד. היא מתרכזת באיסוף נתונים (קליטת משלוחים, ספירות מלאי, תעודות, אספקות קרובות) ובהצגת התראות חיות וביצוע פעולות מיידיות מתוך דשבורד ומסכי טבלאות אינטראקטיביים.

## מטרות עיקריות
- להציג לנהל ולהתריע על ריאגנטים מתקרבים לתוקף, מלאי נמוך ואספקות קרובות.
- לנטר ולהקל על קליטת משלוחים, משיכות, דרישות רכש והזמנות מסגרת.
- לספק ממשק חכם עם סינונים, התאמת תצוגות, קיצורי דרך, ייבוא נתונים והדפסת דוחות.
- לאפשר טיפול אחיד גם במכשירים ניידים, טאבלט ודסקטופ כולל הודעות והקפדות על ההשלכות של עריכה/מחיקה.

## תובנות לבניית הבקאנד
1. **דאטה מודל עשיר ומתמשך**
   - מודל מחלקות: ריאגנטים, ספקים, אנשי קשר, תעודות משלוח/אנליזה, הזמנות פתוחות, הזמנות מסגרת, משיכות, אספקות מחזוריות, ספירות מלאי וארכיון.
   - כל פריט כולל גרסה היסטורית (כמות, תאריך תוקף, סטטוס) כדי לייצר דוחות ספירות, צריכה והוצאה.
   - הוספת שדות של תאריכים בכל טבלה (קליטת משלוח, דרישת רכש, השמדות וכו׳) למעקב מדויק.

2. **ניהול לוגיקה של סטטוסים והשלכות**
   - כשלעשות פעולה (עריכה/מחיקה) על פריט, הבקאנד צריך לבדוק את כל התלויות (דרישה/הזמנה קשורה, ספירת מלאי, צריכה צפויה) ולהטמיע נעילת נתונים וורנינגים.
   - ממשק שאלות אישור בעת יצירת הזמנות/משיכות והצגת הודעות על ההשפעה ברמת המלאי.

3. **מודול התראות ומשימות**
   - Job יוגדר שיחשב: ריאגנטים שפגי תוקף בקרוב (עד שבועיים), מלאי מתמעט לעומת צריכה צפויה, אספקות פתוחות ומסגרות עם יתרות זמינות, ספירת מלאי שמצריכה פעולה.
   - התראות יציגו דו״חות בדשבורד ויאפשרו ניווט למסכים הרלוונטיים.

4. **ניהול אספקות וקליטת משלוחים**
   - כל קליטת משלוח יכולה לקשר הזמנה/משיכה קיימת או להיות אספקה מחזורית חדשה.
   - ניהול תאריכים, עוצבות, צבעים, מספרי משלוח והוספת פריטים ידנית או לפי קטלוג.
   - אפיון למעקב אספקות: הצגה בטבלה, אפשרות לקבלת משלוח, יצירת ערכי אחוזי השמדה/צריכה והדפסות.

5. **מודול ייבוא וקטלוג**
   - אפשרות לייבוא אגנטים/ספקים/אנשי קשר מקבצי Excel.
   - בעת קליטת ריאגנט חדש, מערכת תזהה ותשלח למסך חיבור למילוי פרטי הקטלוג.

6. **ספירות מלאי וחישובי צריכה**
   - מנגנון חכם משווה בין כמות נוכחית, ספירה קודמת, משיכות, השמדות ומשלוחים כדי לחשב צריכה אמיתית.
   - מאפשר חישוב השלמת מלאי לתקופות של חודש, שלושה חודשים או חצי שנה, ובעת הצורך מאפשר הזנת נתוני צריכה ידניים.
   - ניתן לשמור טיוטות ספירה והיסטוריית ספירות כולל דוחות להדפסה וייצוא CSV.

7. **ניהול הצבעות וסטטוס פריטים**
   - הפריטים מציגים סטטוסים: באספקה, במלאי, עברו טיפול/הושמדו/נצרכו.
   - לוגיקה מורכבת שמודדת מה נשאר מכל עוצבה, כמה נצרך, כמה הושמד, כשכל פעולה מעדכנת את הסטטוס ויוצרת רישום תיעודי.

8. **תמיכה במערכת משולבת**
   - אין התממשקות ישירה ל־ERP. יש לשמור נתוני SAP (מספר דרישת רכש, מספר הזמנה, סטטוס).
   - הבקאנד משתמש ב״מספרים לוגיים״ מוגדרים שקל לזכור ומאפשר טיפול אחיד במלאי, הזמנות ודרישות רכש.

9. **נגישות והתאמה אישית**
   - שמירה של תצוגות, סינונים ורוחב עמודות של טבלאות לכל משתמש.
   - אספקת ממשקים מותאמים גם לנייד/טאבלט + ראוטר לכניסה למסכים מהדשבורד.

10. **דוחות ומדדים**
   - ניתן להפיק דוחות השמדה לפי תאריכים, אחוז פריטים מושמדים משנים קודמות.
   - גרף צריכת מלאי, דוח יתרות זמינות, רשימת אספקות קבועות.
   - כל הדוחות ניתנים להדפסה כ־HTML/ייצוא ל־PDF/CSV.

## הצעות לביצוע
1. לבנות API מבוסס REST/GraphQL עם Authentication.
2. ליצור טבלת תיעוד פעולות (היסטוריה) כדי להציג את ההשלכות ולנהל ביטול פעולות.
3. לבצע בדיקות יחידה למודולים עיקריים (הכמות, התראה, שילוב אספקה).
4. לתעד מסלולי עבודה בדשבורד עם פעולות תכופות ומשימות.

במידת הצורך, אפשר להוסיף תרשימי ER או דיאגרמות זרימת מידע לכל חלק עיקרי שיופיע בהמשך.
